## Документация по API

1. Все запросы посылаются на адрес https://api.sarafann.com путём указания метода, например https://api.sarafann.com/method/users.get?params.....
2. Консоль для разработчиков доступна по адресу https://sarafann.com/dev
3. Все методы подписываются ключами авторизации, их существует 2 вида:
  - Ключ авторизации приложения - с этим ключом доступно большинство методов, не требующих работу с текущим пользователем
  - Ключ авторизации пользователя - с этим ключом доступны все методы.
4. Ключ авторизации получается следующим образом:
  - У каждого приложения (официальный клиент или нет) есть `APP_KEY` и `APP_SECRET`
  - Подпись для получения ключа приложения составляется путём шифрования base64 следующей строки
    - `$sig = base64_encode(APP_KEY . ":" . APP_SECRET)`
  - Для получения ключа авторизации приложения необходимо отправить POST запрос на адрес https://api.sarafann.com/auth/app
  - В headers добавить следующие заголовки:
    - `header("Authorization: Basic " . $sig);`
  - В ответе вы получите следующие поля:
    ```
    access_token - сам токен
    expire - время жизни токена
    ```
  - Все последующие запросы подписываются ключом авторизации приложения путём указания заголовков 
  - `header("Authorization: Bearer " . $access_token);`
5. Для получения ключа авторизации пользователя необходимо его авторизовать (либо зарегистрировать) в системе.
6. Авторизаци происходит с помощью метода **auth.login**
  - Отправляется *GET* запрос на адрес https://api.sarafann.com/method/auth.login
  - Он должен быть подписан ключом приложения
  - В качестве параметров выступают следующие поля:
    - **login** - логин пользователя в системе
    - **password** - пароль пользователя в системе
  - Если всё удачно - в ответе вы получите следующие поля:
    - **access_token** - сам токен
    - **expire** - время жизни токена
  - Оба токена необходимо хранить на устройстве для того, что бы после выхода пользователя из системы не запрашивать новый ключ авторизации приложения
7. Выход пользователя из системы осцществляется следующим образом
  - Отправляется *POST* запрос на адрес https://api.sarafann.com/auth/user/logout
  - Он должен быть подписан ключом пользователя
  - После этого старый токен больше недействителен, и авторизоваться с его помощью невозможно
